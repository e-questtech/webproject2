{% extends "base.html" %}

{% block title %}Register - TE Quant{% endblock %}

{% block content %}
<div class="page-heading header-text" style="background-image: none; padding-bottom: 0rem;">
</div>

<!-- Flash Messages -->
<div class="alert">
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
    <div class="alert alert-{{ category }}" style="position: relative; padding: 10px; border-radius: 5px; margin-bottom: 20px; background-color: #f8d7da; color: #721c24;">
        <span class="closebtn" style="position: absolute; top: 0; right: 10px; cursor: pointer; color: #721c24;" onclick="this.parentElement.style.display='none';">&times;</span>
        {{ message }}
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}
</div>

<!-- Registration Form -->
<div class="container mt-5">
    <h2 class="text-center mb-4">Register for the Cohort</h2>

    <div class="row justify-content-center">
        <div class="col-md-8">
            <!-- Success message container -->
            <div id="successMessage" class="alert alert-success d-none" role="alert">
                Registration successful! Thank you for signing up.
            </div>

            <form id="registrationForm" action="{{ url_for('student_register') }}" method="POST">
                <div class="form-group mb-3">
                    <label for="full_name">Full Name</label>
                    <input type="text" class="form-control" id="full_name" name="fullName" required placeholder="Enter your full name">
                </div>

                <div class="form-group mb-3">
                    <label for="email">Email Address</label>
                    <input type="email" class="form-control" id="email" name="email" required placeholder="Enter your email">
                </div>

                <div class="form-group mb-3">
                    <label for="state">State of Residence</label>
                    <select class="form-control" id="state" name="state" required>
                        <option value="Rivers">Rivers</option>
                        <option value="Delta">Delta</option>
                        <option value="Anambra">Anambra</option>
                        <option value="Enugu">Enugu</option>
                        <option value="Imo">Imo</option>
                    </select>
                </div>

                <div class="form-group mb-3">
                    <label for="country_code">Country Code</label>
                    <select class="form-control" id="country_code" name="countryCode" required>
                        <option value="">Select Country Code</option>
                        <option value="+234">Nigeria (+234)</option>
                        <option value="+1">USA (+1)</option>
                        <option value="+44">UK (+44)</option>
                        <option value="+233">Ghana (+233)</option>
                        <!-- Add more country codes as needed -->
                    </select>
                </div>

                <div class="form-group mb-3">
                    <label for="phone">Phone Number</label>
                    <input type="tel" class="form-control" id="phone" name="phone" required placeholder="Enter your phone number">
                </div>

                <div class="form-group mb-3">
                    <label for="course">Preferred Course</label>
                    <select class="form-control" id="course" name="course" required>
                        {% for i in courses %}
                        <option value="{{ i['course_code'] }}">{{ i['course_title'] }}</option>
                        {% endfor %}
                    </select>
                </div>

                <button type="submit" class="btn btn-success btn-block">Sign Up</button>
                <div class="text-center mt-3">
                    <p>Already have an account? <a href="{{ url_for('login') }}">Log in here</a>.</p>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock %}

<!-- Additional Styling -->
<style>
    .container {
        max-width: 600px;
        background-color: #f9f9f9;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    h2 {
        font-size: 2rem;
        font-weight: 700;
        color: #333;
    }

    .form-control {
        border-radius: 0.5rem;
        padding: 0.75rem;
        font-size: 1rem;
    }

    .btn-success {
        background-color: #28a745;
        border-color: #28a745;
        border-radius: 0.5rem;
        font-size: 1.1rem;
        padding: 10px;
    }

    .btn-success:hover {
        background-color: #218838;
        border-color: #1e7e34;
    }

    .alert {
        border-radius: 0.5rem;
    }

    .alert-success {
        margin-bottom: 20px;
    }

    /* Close button for flash messages */
    .closebtn {
        font-size: 1.5rem;
    }
</style>
