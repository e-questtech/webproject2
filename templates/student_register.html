{% extends "base.html" %}
{% block title %} Student Registration
{% endblock %}
{% block head %}
{{ super() }}
{% endblock %}

{% block content %}
    <form action="{{ url_for('student_register') }}" method="post">
<div class="alert">
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        {% for category, message in messages %}
        <span class="closebtn">&times;</span>
        <div class="{{ category }}">{{ message }}</div>
        {% endfor %}
        {% endif %}
        {% endwith %}
    </div>
<div class="container mt-5">
    <h1>Student Registration Form</h1>
        <div class="form-group">
            <label for="fullName">Full Name</label>
            <input type="text" class="form-control" id="fullName" name="fullName" placeholder="Enter Full Name" required>
        </div>

        <div class="form-group">
            <label for="email">Email Address</label>
            <input type="email" class="form-control" id="email" name="email" placeholder="Enter Email" required>
        </div>

        <div class="form-group">
            <div class="form-group">
            <select name="countryCode" required>
        <option value="">Select Country Code</option>
        <option value="+234">Nigeria (+234)</option>
        <option value="+233">Ghana (+233)</option>
            </select>
            </div>
        </div>


        <div class="form-group">
            <label for="phone">Phone Number</label>
            <input type="text" class="form-control" id="phone" name="phone" placeholder="Enter Phone Number" required>
        
        </div>

        <div class="form-group">
            <label for="course">Preferred Course</label>
            <select class="form-control" id="course" name="course" required>
                {% for i in courses %}
                <option  name = "courses" value="{{ i['course_code'] }}" >{{ i['course_title'] }}</option>
            {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="state">State of Residence</label>
            <select class="form-control" id="state" name="state" required>
                <option value="Rivers">Rivers</option>
                <option value="Delta">Delta</option>
                <option value="Anambra">Anambra</option>
                <option value="Enugu">Enugu</option>
                <option value="Imo">Imo</option>
                <option value="Other">Other</option>
            </select>
        </div>

        <div class="form-group" id="otherStateField" style="display:none;">
            <label for="otherState">Enter State</label>
            <input type="text" class="form-control" id="otherState" name="otherState" placeholder="Enter State">
        </div>
<button type="submit" class="btn btn-primary">Register</button>
    </form>
        

{% endblock %}<script>
    // Show/hide custom state input
    function checkOtherState() {
        var stateDropdown = document.getElementById('stateDropdown');
        var otherStateField = document.getElementById('otherStateField');
        var otherStateInput = document.getElementById('otherStateInput');

        if (stateDropdown.value === 'Other') {
            otherStateField.style.display = 'block';
            otherStateInput.required = true; // Make the input required
        } else {
            otherStateField.style.display = 'none';
            otherStateInput.required = false; // Remove the required attribute
            otherStateInput.value = ''; // Clear the input if it's hidden
        }
    }
</script>

